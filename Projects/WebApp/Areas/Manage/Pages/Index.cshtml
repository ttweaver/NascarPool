@page
@model IndexModel
@{
    ViewData["Title"] = "Manage Dashboard";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Manage Dashboard</h1>
    @if (Model.CurrentSeason != null)
    {
        <span class="badge bg-info fs-6">
            <i class="bi bi-calendar"></i> @Model.CurrentSeason.Name (@Model.CurrentSeason.Year)
        </span>
    }
</div>

@if (Model.CurrentSeason != null)
{
    <div class="alert alert-info mb-4">
        <i class="bi bi-info-circle"></i> Statistics below are filtered for <strong>@Model.CurrentSeason.Name</strong>. 
        Use the season selector in the navigation to switch between pools/seasons.
    </div>
}
else
{
    <div class="alert alert-warning mb-4">
        <i class="bi bi-exclamation-triangle"></i> No active season found. Please create a pool to get started.
    </div>
}

<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card text-white bg-success">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title mb-1">Races</h5>
                        <h2 class="mb-0">@Model.RaceCount</h2>
                        @if (Model.CurrentSeason != null)
                        {
                            <small>in @Model.CurrentSeason.Name</small>
                        }
                    </div>
                    <div>
                        <i class="bi bi-flag-checkered fs-1"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <a asp-page="/Races/Index" class="text-white text-decoration-none">
                    View All <i class="bi bi-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-4">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title mb-1">Drivers</h5>
                        <h2 class="mb-0">@Model.DriverCount</h2>
                        @if (Model.CurrentSeason != null)
                        {
                            <small>in @Model.CurrentSeason.Name</small>
                        }
                    </div>
                    <div>
                        <i class="bi bi-person-badge fs-1"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <a asp-page="/Drivers/Index" class="text-white text-decoration-none">
                    View All <i class="bi bi-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-4">
        <div class="card text-white bg-info">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title mb-1">Players</h5>
                        <h2 class="mb-0">@Model.PlayerCount</h2>
                        @if (Model.CurrentSeason != null)
                        {
                            <small>in @Model.CurrentSeason.Name</small>
                        }
                    </div>
                    <div>
                        <i class="bi bi-people fs-1"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <a asp-page="/Players/Index" class="text-white text-decoration-none">
                    View All <i class="bi bi-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-dark text-white">
                <i class="bi bi-list-task"></i> Quick Actions
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h5><i class="bi bi-trophy text-primary"></i> Pool Management</h5>
                        <div class="list-group">
                            <a asp-page="/Pools/Create" class="list-group-item list-group-item-action">
                                <i class="bi bi-plus-circle"></i> Create New Pool
                            </a>
                            <a asp-page="/Pools/Index" class="list-group-item list-group-item-action">
                                <i class="bi bi-list"></i> Manage Pools
                            </a>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h5><i class="bi bi-flag-checkered text-success"></i> Race Management</h5>
                        <div class="list-group">
                            <a asp-page="/Races/Create" class="list-group-item list-group-item-action">
                                <i class="bi bi-plus-circle"></i> Create New Race
                            </a>
                            <a asp-page="/Races/Index" class="list-group-item list-group-item-action">
                                <i class="bi bi-list"></i> Manage Races
                            </a>
                            <a asp-page="/Races/Results/Index" class="list-group-item list-group-item-action">
                                <i class="bi bi-clipboard-data"></i> Manage Race Results
                            </a>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h5><i class="bi bi-person-badge text-warning"></i> Driver Management</h5>
                        <div class="list-group">
                            <a asp-page="/Drivers/Create" class="list-group-item list-group-item-action">
                                <i class="bi bi-plus-circle"></i> Create New Driver
                            </a>
                            <a asp-page="/Drivers/Index" class="list-group-item list-group-item-action">
                                <i class="bi bi-list"></i> Manage Drivers
                            </a>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h5><i class="bi bi-people text-info"></i> Player Management</h5>
                        <div class="list-group">
                            <a asp-page="/Players/Create" class="list-group-item list-group-item-action">
                                <i class="bi bi-plus-circle"></i> Create New Player
                            </a>
                            <a asp-page="/Players/Index" class="list-group-item list-group-item-action">
                                <i class="bi bi-list"></i> Manage Players
                            </a>
                            <a asp-page="/Players/ManageAllowedUsers" class="list-group-item list-group-item-action">
                                <i class="bi bi-person-check"></i> Manage Allowed Users
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>